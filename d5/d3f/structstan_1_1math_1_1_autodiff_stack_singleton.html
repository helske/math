<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Stan Math Library: stan::math::AutodiffStackSingleton&lt; ChainableT, ChainableAllocT &gt; Struct Template Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../stanlogo-main.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Stan Math Library
   &#160;<span id="projectnumber">2.19.0</span>
   </div>
   <div id="projectbrief">reverse mode automatic differentiation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../da/dce/namespacestan.html">stan</a></li><li class="navelem"><a class="el" href="../../d4/d84/namespacestan_1_1math.html">math</a></li><li class="navelem"><a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html">AutodiffStackSingleton</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="../../de/dc8/structstan_1_1math_1_1_autodiff_stack_singleton-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">stan::math::AutodiffStackSingleton&lt; ChainableT, ChainableAllocT &gt; Struct Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides a thread_local singleton if needed.  
 <a href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d6/daf/autodiffstackstorage_8hpp_source.html">autodiffstackstorage.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8a/structstan_1_1math_1_1_autodiff_stack_singleton_1_1_autodiff_stack_storage.html">AutodiffStackStorage</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aab8dda40794ce5d453f5ccd5a98c5c0b"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html">AutodiffStackSingleton</a>&lt; ChainableT, ChainableAllocT &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html#aab8dda40794ce5d453f5ccd5a98c5c0b">AutodiffStackSingleton_t</a></td></tr>
<tr class="separator:aab8dda40794ce5d453f5ccd5a98c5c0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae71c32fa33780b197347443f0d99b07d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html#ae71c32fa33780b197347443f0d99b07d">AutodiffStackSingleton</a> ()=delete</td></tr>
<tr class="separator:ae71c32fa33780b197347443f0d99b07d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a626deeb954a547d3ba9f6a8677ff9387"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html#a626deeb954a547d3ba9f6a8677ff9387">AutodiffStackSingleton</a> (<a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html#aab8dda40794ce5d453f5ccd5a98c5c0b">AutodiffStackSingleton_t</a> const &amp;)=delete</td></tr>
<tr class="separator:a626deeb954a547d3ba9f6a8677ff9387"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e50e517b9201c44fa924d4ccfadbf96"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html">AutodiffStackSingleton</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html#a5e50e517b9201c44fa924d4ccfadbf96">operator=</a> (const <a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html#aab8dda40794ce5d453f5ccd5a98c5c0b">AutodiffStackSingleton_t</a> &amp;)=delete</td></tr>
<tr class="separator:a5e50e517b9201c44fa924d4ccfadbf96"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aeb6d630298edf1135ba5359f890168f1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d8/d8a/structstan_1_1math_1_1_autodiff_stack_singleton_1_1_autodiff_stack_storage.html">AutodiffStackStorage</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html#aeb6d630298edf1135ba5359f890168f1">instance</a> ()</td></tr>
<tr class="separator:aeb6d630298edf1135ba5359f890168f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename ChainableT, typename ChainableAllocT&gt;<br />
struct stan::math::AutodiffStackSingleton&lt; ChainableT, ChainableAllocT &gt;</h3>

<p>Provides a thread_local singleton if needed. </p>
<p>Read warnings below! For performance reasons the singleton is a global static for the case of no threading which is returned by a function. This design should allow the compiler to apply necessary inlining to get maximal performance. However, this design suffers from "the static
init order fiasco"[0]. Anywhere this is used, we must be absolutely positive that it doesn't matter when the singleton will get initialized relative to other static variables. In exchange, we get a more performant singleton pattern for the non-threading case. In the threading case we use the defacto standard C++11 singleton pattern relying on a function wrapping a static local variable. This standard pattern is expected to be well supported by the major compilers (as its standard), but it does incur some performance penalty. There has been some discussion on this; see [1] and [2] and the discussions those PRs link to as well.</p>
<p>These are thread_local only if the user asks for it with -DSTAN_THREADS. This is primarily because Apple clang compilers before 2016 don't support thread_local and the additional performance cost. We have proposed removing support for those[3], and at that time we should evaluate the performance of a switch to thread_local. If there is no loss in performance, we can remove this ifdef.</p>
<p>[0] <a href="https://isocpp.org/wiki/faq/ctors#static-init-order">https://isocpp.org/wiki/faq/ctors#static-init-order</a> [1] <a href="https://github.com/stan-dev/math/pull/840">https://github.com/stan-dev/math/pull/840</a> [2] <a href="https://github.com/stan-dev/math/pull/826">https://github.com/stan-dev/math/pull/826</a> [3] <a href="http://discourse.mc-stan.org/t/potentially-dropping-support-for-older-versions-of-apples-version-of-clang/3780/">http://discourse.mc-stan.org/t/potentially-dropping-support-for-older-versions-of-apples-version-of-clang/3780/</a> </p>

<p>Definition at line <a class="el" href="../../d6/daf/autodiffstackstorage_8hpp_source.html#l00042">42</a> of file <a class="el" href="../../d6/daf/autodiffstackstorage_8hpp_source.html">autodiffstackstorage.hpp</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="aab8dda40794ce5d453f5ccd5a98c5c0b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ChainableT , typename ChainableAllocT &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html">AutodiffStackSingleton</a>&lt;ChainableT, ChainableAllocT&gt; <a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html">stan::math::AutodiffStackSingleton</a>&lt; ChainableT, ChainableAllocT &gt;::<a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html#aab8dda40794ce5d453f5ccd5a98c5c0b">AutodiffStackSingleton_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/daf/autodiffstackstorage_8hpp_source.html#l00044">44</a> of file <a class="el" href="../../d6/daf/autodiffstackstorage_8hpp_source.html">autodiffstackstorage.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae71c32fa33780b197347443f0d99b07d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ChainableT , typename ChainableAllocT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html">stan::math::AutodiffStackSingleton</a>&lt; ChainableT, ChainableAllocT &gt;::<a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html">AutodiffStackSingleton</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a626deeb954a547d3ba9f6a8677ff9387"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ChainableT , typename ChainableAllocT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html">stan::math::AutodiffStackSingleton</a>&lt; ChainableT, ChainableAllocT &gt;::<a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html">AutodiffStackSingleton</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html#aab8dda40794ce5d453f5ccd5a98c5c0b">AutodiffStackSingleton_t</a> const &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aeb6d630298edf1135ba5359f890168f1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ChainableT , typename ChainableAllocT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d8/d8a/structstan_1_1math_1_1_autodiff_stack_singleton_1_1_autodiff_stack_storage.html">AutodiffStackStorage</a>&amp; <a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html">stan::math::AutodiffStackSingleton</a>&lt; ChainableT, ChainableAllocT &gt;::instance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/daf/autodiffstackstorage_8hpp_source.html#l00064">64</a> of file <a class="el" href="../../d6/daf/autodiffstackstorage_8hpp_source.html">autodiffstackstorage.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5e50e517b9201c44fa924d4ccfadbf96"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ChainableT , typename ChainableAllocT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html">AutodiffStackSingleton</a>&amp; <a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html">stan::math::AutodiffStackSingleton</a>&lt; ChainableT, ChainableAllocT &gt;::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d5/d3f/structstan_1_1math_1_1_autodiff_stack_singleton.html#aab8dda40794ce5d453f5ccd5a98c5c0b">AutodiffStackSingleton_t</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>stan/math/rev/core/<a class="el" href="../../d6/daf/autodiffstackstorage_8hpp_source.html">autodiffstackstorage.hpp</a></li>
</ul>
</div><!-- contents -->
<hr/>
<div class="conents" style="font-size:80%;">
  <span style="float:left; margin=0 1em 0 1em;">
  &nbsp;&nbsp;&nbsp;&nbsp;
  [ <a href="http://mc-stan.org/">Stan Home Page</a> ]
  </span>
  <span style="float:right; margin=0 1em 0 1em;">
  <i>&copy; 2011&ndash;2018,
  Stan Development Team.
  &nbsp;&nbsp;&nbsp;&nbsp;
  </i>
  </span>
</div>
